{"ast":null,"code":"var _jsxFileName = \"/home/ad.rapidops.com/riya.panchal/Downloads/speedyfood-main/client/src/pages/Auth/Registration/Register.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Link, useHistory } from \"react-router-dom\";\nimport swal from 'sweetalert';\nimport { motion } from 'framer-motion';\nimport PasswordInput from '../Components/PasswordInput';\nimport { RegiterValidation } from '../Utils/Validation';\nimport { SweetError, SweetInfo, SweetOtpConfig, SweetOtpWrong, SweetSuccess, SweetWait, SweetWrong } from '../../../SweetAlert';\nimport { PageAnimation } from '../../../utils/PageAnimation';\nimport api from '../../../utils/api';\nimport { SendEmail } from '../../../EmailJs/SendEmail';\nimport { VerifyOtpTemplate } from '../../../EmailJs/Templates';\nimport { generateOTP } from '../../../utils/functions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Register = () => {\n  _s();\n  const [UserDetails, setUserDetails] = useState({\n    username: '',\n    email: '',\n    password: '',\n    phone: ''\n  });\n  const [otpStatusText, setOtpStatusText] = useState('Send Otp');\n  const history = useHistory();\n  const [otp, setOtp] = useState(generateOTP());\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (RegiterValidation(UserDetails)) {\n      SweetWait();\n      const res = await api.post('/userexist', UserDetails.email);\n      const {\n        info,\n        error\n      } = res.data;\n      if (info) {\n        SweetInfo(info);\n        history.push('/signin');\n      } else if (error) SweetWrong();else {\n        const sendEmail = {\n          otp,\n          username: UserDetails.username,\n          email: UserDetails.email\n        };\n        // try {\n\n        // const isSent  = await SendEmail(VerifyOtpTemplate(sendEmail))\n\n        // if(isSent.status === 200){\n\n        // const userOtp = await swal(SweetOtpConfig)\n        // if(otp === userOtp){\n\n        // swal.stopLoading()\n        // swal.close()\n\n        const res = await api.post('/register', UserDetails);\n        const {\n          success,\n          error\n        } = res.data;\n        if (success) {\n          SweetSuccess(success);\n          history.push('/signin');\n        } else SweetError(error);\n        //     }else\n        //         SweetOtpWrong() \n        //         setOtpStatusText('Resend Otp')   \n        // }\n        // } catch (error) {\n        //     SweetWrong()\n        // }\n      }\n    }\n  };\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setUserDetails(prev => {\n      return {\n        ...prev,\n        [name]: value\n      };\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(motion.section, {\n    className: \"flex justify-center pt-20\",\n    initial: \"in\",\n    animate: \"out\",\n    exit: \"exit\",\n    variants: PageAnimation,\n    transition: {\n      duration: 0.4\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-xs\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        autoComplete: \"new-password\",\n        className: \"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"input-label\",\n            htmlFor: \"username\",\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"username\",\n            value: UserDetails.username,\n            onChange: handleChange,\n            className: \"input-box\",\n            type: \"text\",\n            placeholder: \"Enter your name\",\n            autoComplete: \"none\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"input-label\",\n            htmlFor: \"email\",\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"email\",\n            value: UserDetails.email,\n            onChange: handleChange,\n            className: \"input-box\",\n            autoComplete: \"none\",\n            type: \"email\",\n            placeholder: \"Enter your email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"input-label\",\n            htmlFor: \"phone\",\n            children: \"Phone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"phone\",\n            value: UserDetails.phone,\n            onChange: handleChange,\n            className: \"input-box\",\n            placeholder: \"Enter your phone number\",\n            autoComplete: \"none\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(PasswordInput, {\n          value: UserDetails.password,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary btn mt-4\",\n          type: \"submit\",\n          children: otpStatusText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full text-center my-4\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            className: \"primary-text align-baseline font-bold text-sm\",\n            to: \"/signin\",\n            children: \"Already have account?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-gray-500 text-xs\",\n        children: \"\\xA92021 Speedyfood. All rights reserved.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 9\n  }, this);\n};\n_s(Register, \"QjzSaIKOpxLJZCb/aa1u7gxoR8A=\", false, function () {\n  return [useHistory];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","Link","useHistory","swal","motion","PasswordInput","RegiterValidation","SweetError","SweetInfo","SweetOtpConfig","SweetOtpWrong","SweetSuccess","SweetWait","SweetWrong","PageAnimation","api","SendEmail","VerifyOtpTemplate","generateOTP","Register","UserDetails","setUserDetails","username","email","password","phone","otpStatusText","setOtpStatusText","history","otp","setOtp","handleSubmit","e","preventDefault","res","post","info","error","data","push","sendEmail","success","handleChange","name","value","target","prev","duration"],"sources":["/home/ad.rapidops.com/riya.panchal/Downloads/speedyfood-main/client/src/pages/Auth/Registration/Register.js"],"sourcesContent":["import React, { useState } from 'react'\nimport { Link, useHistory } from \"react-router-dom\"\nimport swal from 'sweetalert'\nimport { motion } from 'framer-motion'\nimport PasswordInput from '../Components/PasswordInput'\nimport { RegiterValidation } from '../Utils/Validation'\nimport { SweetError, SweetInfo, SweetOtpConfig, SweetOtpWrong, SweetSuccess, SweetWait, SweetWrong } from '../../../SweetAlert'\nimport { PageAnimation } from '../../../utils/PageAnimation'\nimport api from '../../../utils/api'\nimport { SendEmail } from '../../../EmailJs/SendEmail'\nimport { VerifyOtpTemplate } from '../../../EmailJs/Templates'\nimport { generateOTP } from '../../../utils/functions'\n\nconst Register = () => {\n\n    const [UserDetails, setUserDetails] = useState({\n        username:'',\n        email:'',\n        password:'',\n        phone:''\n    })\n    \n    const [otpStatusText, setOtpStatusText] = useState('Send Otp')\n\n    const history = useHistory()\n\n    const [otp, setOtp] = useState(generateOTP())\n\n    const handleSubmit = async (e) => {\n\n        e.preventDefault() \n\n        if(RegiterValidation(UserDetails)){\n           \n            SweetWait()\n\n            const res = await api.post('/userexist',UserDetails.email)\n    \n            const { info , error  } = res.data  \n\n            if(info){\n                SweetInfo(info)\n                history.push('/signin')\n            }\n            else if(error)\n                SweetWrong()\n            else{\n        \n            const sendEmail = {\n                otp,\n                username:UserDetails.username,\n                email:UserDetails.email\n            }\n            // try {\n                \n                // const isSent  = await SendEmail(VerifyOtpTemplate(sendEmail))\n                \n                // if(isSent.status === 200){\n                   \n                    // const userOtp = await swal(SweetOtpConfig)\n                    // if(otp === userOtp){\n\n                        // swal.stopLoading()\n                        // swal.close()\n\n                        const res = await api.post('/register',UserDetails)\n                        const { success , error } = res.data\n            \n                        if(success){\n                            SweetSuccess(success)\n                            history.push('/signin')\n                        }\n                        else\n                            SweetError(error)          \n                //     }else\n                //         SweetOtpWrong() \n                //         setOtpStatusText('Resend Otp')   \n                // }\n            // } catch (error) {\n            //     SweetWrong()\n            // }\n        }\n    }\n}\n\n    const handleChange = (e) => {\n        const {name ,value } = e.target\n        setUserDetails((prev) => {\n            return { ...prev,[name]:value }\n        })\n    }\n\n    return (\n        <motion.section className=\"flex justify-center pt-20\" initial='in' animate='out' exit='exit' \n                        variants={PageAnimation} transition={{ duration: 0.4 }}>\n            <div className=\"w-full max-w-xs\">\n                <form onSubmit={handleSubmit} autoComplete=\"new-password\" className=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\">\n                    <div className=\"mb-4\">\n                        <label className=\"input-label\" htmlFor=\"username\">Name</label>\n                        <input \n                            name=\"username\" \n                            value={UserDetails.username} \n                            onChange={handleChange}\n                            className=\"input-box\"\n                            type=\"text\" \n                            placeholder=\"Enter your name\" \n                            autoComplete=\"none\" />\n                    </div>\n                    <div className=\"mb-4\">\n                        <label className=\"input-label\" htmlFor=\"email\">Email</label>\n                        <input \n                            name=\"email\" \n                            value={UserDetails.email} \n                            onChange={handleChange}\n                            className=\"input-box\" autoComplete=\"none\"\n                            type=\"email\" \n                            placeholder=\"Enter your email\" />\n                    </div>\n                    <div className=\"mb-4\">\n                        <label className=\"input-label\" htmlFor=\"phone\">Phone</label>\n                        <input \n                            name=\"phone\" \n                            value={UserDetails.phone} \n                            onChange={handleChange}\n                            className=\"input-box\"\n                            placeholder=\"Enter your phone number\" \n                            autoComplete=\"none\" />\n                    </div>\n                    <PasswordInput \n                        value={UserDetails.password} \n                        onChange={handleChange} />\n                    <button className=\"btn-primary btn mt-4\" type=\"submit\">{otpStatusText}</button>\n                    <div className=\"w-full text-center my-4\">\n                        <Link className=\"primary-text align-baseline font-bold text-sm\" to=\"/signin\">\n                            Already have account?\n                        </Link>\n                    </div>\n                </form>\n                <p className=\"text-center text-gray-500 text-xs\">&copy;2021 Speedyfood. All rights reserved.</p>\n            </div>\n        </motion.section>\n    )\n}\n\nexport default Register\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,IAAI,EAAEC,UAAU,QAAQ,kBAAkB;AACnD,OAAOC,IAAI,MAAM,YAAY;AAC7B,SAASC,MAAM,QAAQ,eAAe;AACtC,OAAOC,aAAa,MAAM,6BAA6B;AACvD,SAASC,iBAAiB,QAAQ,qBAAqB;AACvD,SAASC,UAAU,EAAEC,SAAS,EAAEC,cAAc,EAAEC,aAAa,EAAEC,YAAY,EAAEC,SAAS,EAAEC,UAAU,QAAQ,qBAAqB;AAC/H,SAASC,aAAa,QAAQ,8BAA8B;AAC5D,OAAOC,GAAG,MAAM,oBAAoB;AACpC,SAASC,SAAS,QAAQ,4BAA4B;AACtD,SAASC,iBAAiB,QAAQ,4BAA4B;AAC9D,SAASC,WAAW,QAAQ,0BAA0B;AAAA;AAEtD,MAAMC,QAAQ,GAAG,MAAM;EAAA;EAEnB,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGrB,QAAQ,CAAC;IAC3CsB,QAAQ,EAAC,EAAE;IACXC,KAAK,EAAC,EAAE;IACRC,QAAQ,EAAC,EAAE;IACXC,KAAK,EAAC;EACV,CAAC,CAAC;EAEF,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAG3B,QAAQ,CAAC,UAAU,CAAC;EAE9D,MAAM4B,OAAO,GAAG1B,UAAU,EAAE;EAE5B,MAAM,CAAC2B,GAAG,EAAEC,MAAM,CAAC,GAAG9B,QAAQ,CAACkB,WAAW,EAAE,CAAC;EAE7C,MAAMa,YAAY,GAAG,MAAOC,CAAC,IAAK;IAE9BA,CAAC,CAACC,cAAc,EAAE;IAElB,IAAG3B,iBAAiB,CAACc,WAAW,CAAC,EAAC;MAE9BR,SAAS,EAAE;MAEX,MAAMsB,GAAG,GAAG,MAAMnB,GAAG,CAACoB,IAAI,CAAC,YAAY,EAACf,WAAW,CAACG,KAAK,CAAC;MAE1D,MAAM;QAAEa,IAAI;QAAGC;MAAO,CAAC,GAAGH,GAAG,CAACI,IAAI;MAElC,IAAGF,IAAI,EAAC;QACJ5B,SAAS,CAAC4B,IAAI,CAAC;QACfR,OAAO,CAACW,IAAI,CAAC,SAAS,CAAC;MAC3B,CAAC,MACI,IAAGF,KAAK,EACTxB,UAAU,EAAE,MACZ;QAEJ,MAAM2B,SAAS,GAAG;UACdX,GAAG;UACHP,QAAQ,EAACF,WAAW,CAACE,QAAQ;UAC7BC,KAAK,EAACH,WAAW,CAACG;QACtB,CAAC;QACD;;QAEI;;QAEA;;QAEI;QACA;;QAEI;QACA;;QAEA,MAAMW,GAAG,GAAG,MAAMnB,GAAG,CAACoB,IAAI,CAAC,WAAW,EAACf,WAAW,CAAC;QACnD,MAAM;UAAEqB,OAAO;UAAGJ;QAAM,CAAC,GAAGH,GAAG,CAACI,IAAI;QAEpC,IAAGG,OAAO,EAAC;UACP9B,YAAY,CAAC8B,OAAO,CAAC;UACrBb,OAAO,CAACW,IAAI,CAAC,SAAS,CAAC;QAC3B,CAAC,MAEGhC,UAAU,CAAC8B,KAAK,CAAC;QAC7B;QACA;QACA;QACA;QACJ;QACA;QACA;MACJ;IACJ;EACJ,CAAC;;EAEG,MAAMK,YAAY,GAAIV,CAAC,IAAK;IACxB,MAAM;MAACW,IAAI;MAAEC;IAAM,CAAC,GAAGZ,CAAC,CAACa,MAAM;IAC/BxB,cAAc,CAAEyB,IAAI,IAAK;MACrB,OAAO;QAAE,GAAGA,IAAI;QAAC,CAACH,IAAI,GAAEC;MAAM,CAAC;IACnC,CAAC,CAAC;EACN,CAAC;EAED,oBACI,QAAC,MAAM,CAAC,OAAO;IAAC,SAAS,EAAC,2BAA2B;IAAC,OAAO,EAAC,IAAI;IAAC,OAAO,EAAC,KAAK;IAAC,IAAI,EAAC,MAAM;IAC5E,QAAQ,EAAE9B,aAAc;IAAC,UAAU,EAAE;MAAEiC,QAAQ,EAAE;IAAI,CAAE;IAAA,uBACnE;MAAK,SAAS,EAAC,iBAAiB;MAAA,wBAC5B;QAAM,QAAQ,EAAEhB,YAAa;QAAC,YAAY,EAAC,cAAc;QAAC,SAAS,EAAC,gDAAgD;QAAA,wBAChH;UAAK,SAAS,EAAC,MAAM;UAAA,wBACjB;YAAO,SAAS,EAAC,aAAa;YAAC,OAAO,EAAC,UAAU;YAAA,UAAC;UAAI;YAAA;YAAA;YAAA;UAAA,QAAQ,eAC9D;YACI,IAAI,EAAC,UAAU;YACf,KAAK,EAAEX,WAAW,CAACE,QAAS;YAC5B,QAAQ,EAAEoB,YAAa;YACvB,SAAS,EAAC,WAAW;YACrB,IAAI,EAAC,MAAM;YACX,WAAW,EAAC,iBAAiB;YAC7B,YAAY,EAAC;UAAM;YAAA;YAAA;YAAA;UAAA,QAAG;QAAA;UAAA;UAAA;UAAA;QAAA,QACxB,eACN;UAAK,SAAS,EAAC,MAAM;UAAA,wBACjB;YAAO,SAAS,EAAC,aAAa;YAAC,OAAO,EAAC,OAAO;YAAA,UAAC;UAAK;YAAA;YAAA;YAAA;UAAA,QAAQ,eAC5D;YACI,IAAI,EAAC,OAAO;YACZ,KAAK,EAAEtB,WAAW,CAACG,KAAM;YACzB,QAAQ,EAAEmB,YAAa;YACvB,SAAS,EAAC,WAAW;YAAC,YAAY,EAAC,MAAM;YACzC,IAAI,EAAC,OAAO;YACZ,WAAW,EAAC;UAAkB;YAAA;YAAA;YAAA;UAAA,QAAG;QAAA;UAAA;UAAA;UAAA;QAAA,QACnC,eACN;UAAK,SAAS,EAAC,MAAM;UAAA,wBACjB;YAAO,SAAS,EAAC,aAAa;YAAC,OAAO,EAAC,OAAO;YAAA,UAAC;UAAK;YAAA;YAAA;YAAA;UAAA,QAAQ,eAC5D;YACI,IAAI,EAAC,OAAO;YACZ,KAAK,EAAEtB,WAAW,CAACK,KAAM;YACzB,QAAQ,EAAEiB,YAAa;YACvB,SAAS,EAAC,WAAW;YACrB,WAAW,EAAC,yBAAyB;YACrC,YAAY,EAAC;UAAM;YAAA;YAAA;YAAA;UAAA,QAAG;QAAA;UAAA;UAAA;UAAA;QAAA,QACxB,eACN,QAAC,aAAa;UACV,KAAK,EAAEtB,WAAW,CAACI,QAAS;UAC5B,QAAQ,EAAEkB;QAAa;UAAA;UAAA;UAAA;QAAA,QAAG,eAC9B;UAAQ,SAAS,EAAC,sBAAsB;UAAC,IAAI,EAAC,QAAQ;UAAA,UAAEhB;QAAa;UAAA;UAAA;UAAA;QAAA,QAAU,eAC/E;UAAK,SAAS,EAAC,yBAAyB;UAAA,uBACpC,QAAC,IAAI;YAAC,SAAS,EAAC,+CAA+C;YAAC,EAAE,EAAC,SAAS;YAAA,UAAC;UAE7E;YAAA;YAAA;YAAA;UAAA;QAAO;UAAA;UAAA;UAAA;QAAA,QACL;MAAA;QAAA;QAAA;QAAA;MAAA,QACH,eACP;QAAG,SAAS,EAAC,mCAAmC;QAAA,UAAC;MAA2C;QAAA;QAAA;QAAA;MAAA,QAAI;IAAA;MAAA;MAAA;MAAA;IAAA;EAC9F;IAAA;IAAA;IAAA;EAAA,QACO;AAEzB,CAAC;AAAA,GAjIKP,QAAQ;EAAA,QAWMjB,UAAU;AAAA;AAAA,KAXxBiB,QAAQ;AAmId,eAAeA,QAAQ;AAAA;AAAA"},"metadata":{},"sourceType":"module"}