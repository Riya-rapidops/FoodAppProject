{"ast":null,"code":"import { secureStorage } from \"./context\";\nexport const reducer = (state, action) => {\n  var _state$cartItems, _state$cartItems2, _state$cartItems3, _state$cartItems4;\n  let cart = [];\n  const exist = state.cartItems ? state === null || state === void 0 ? void 0 : (_state$cartItems = state.cartItems) === null || _state$cartItems === void 0 ? void 0 : _state$cartItems.find(x => {\n    var _action$item;\n    return x.id === ((_action$item = action.item) === null || _action$item === void 0 ? void 0 : _action$item.id);\n  }) : undefined;\n  switch (action.type) {\n    case \"ADD_CART\":\n      if (exist !== undefined) cart = (state === null || state === void 0 ? void 0 : state.cartItems) && (state === null || state === void 0 ? void 0 : (_state$cartItems2 = state.cartItems) === null || _state$cartItems2 === void 0 ? void 0 : _state$cartItems2.map(x => x.id === action.item.id ? {\n        ...exist,\n        qty: exist.qty + 1\n      } : x));else cart = [...(state === null || state === void 0 ? void 0 : state.cartItems), {\n        ...action.item,\n        qty: 1\n      }];\n      secureStorage.setItem('cartItems', cart);\n      return {\n        ...state,\n        cartItems: cart\n      };\n    case \"REMOVE_CART\":\n      if (exist.qty === 1) cart = (state === null || state === void 0 ? void 0 : state.cartItems) && ((_state$cartItems3 = state.cartItems) === null || _state$cartItems3 === void 0 ? void 0 : _state$cartItems3.filter(x => x.id !== action.item.id));else cart = (state === null || state === void 0 ? void 0 : state.cartItems) && ((_state$cartItems4 = state.cartItems) === null || _state$cartItems4 === void 0 ? void 0 : _state$cartItems4.map(x => x.id === action.item.id ? {\n        ...exist,\n        qty: exist.qty - 1\n      } : x));\n      secureStorage.setItem('cartItems', cart);\n      return {\n        ...state,\n        cartItems: cart\n      };\n    case \"SET_USER\":\n      secureStorage.setItem('user', action.user);\n      secureStorage.setItem('token', action.token);\n      return {\n        ...state,\n        user: action.user\n      };\n    case \"UNSET_USER\":\n      secureStorage.removeItem('user');\n      return {\n        ...state,\n        user: {}\n      };\n    case \"SET_PRICE\":\n      secureStorage.setItem('priceDetails', action.priceDetails);\n      return {\n        ...state,\n        priceDetails: action.priceDetails\n      };\n    case \"EMPTY_CART\":\n      secureStorage.removeItem('cartItems');\n      return {\n        ...state,\n        cartItems: {}\n      };\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["secureStorage","reducer","state","action","cart","exist","cartItems","find","x","id","item","undefined","type","map","qty","setItem","filter","user","token","removeItem","priceDetails"],"sources":["/home/ad.rapidops.com/riya.panchal/Downloads/speedyfood-main/client/src/utils/reducers.js"],"sourcesContent":["import { secureStorage } from \"./context\"\n\nexport const reducer = (state,action) => {\n    let cart = []\n    const exist = state.cartItems ? state?.cartItems?.find((x) => x.id === action.item?.id) : undefined\n    switch(action.type){\n        case \"ADD_CART\": \n            if (exist !== undefined)\n                cart = state?.cartItems && state?.cartItems?.map((x) => x.id === action.item.id ? { ...exist, qty: exist.qty + 1 } : x)\n            else\n                cart = [...state?.cartItems, { ...action.item, qty: 1 }]\n\n            secureStorage.setItem('cartItems',cart)\n            return { ...state , cartItems:cart} \n\n        case \"REMOVE_CART\":\n            if (exist.qty === 1)\n                cart = state?.cartItems && state.cartItems?.filter((x) => x.id !== action.item.id)\n            else\n                cart = state?.cartItems && state.cartItems?.map((x) => x.id === action.item.id ? { ...exist, qty: exist.qty - 1 } : x)\n\n            secureStorage.setItem('cartItems',cart)\n            return { ...state , cartItems:cart}\n\n        case \"SET_USER\":\n            secureStorage.setItem('user', action.user)\n            secureStorage.setItem('token', action.token)\n            return { ...state , user:action.user }\n\n        case \"UNSET_USER\":\n            secureStorage.removeItem('user')\n            return {...state , user:{} }\n\n        case \"SET_PRICE\":\n            secureStorage.setItem('priceDetails', action.priceDetails)\n            return {...state , priceDetails:action.priceDetails }\n        \n        case \"EMPTY_CART\":\n            secureStorage.removeItem('cartItems')\n            return {...state , cartItems:{} }\n\n        default:\n            return state\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}