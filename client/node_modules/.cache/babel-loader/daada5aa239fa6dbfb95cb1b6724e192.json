{"ast":null,"code":"var _jsxFileName = \"/home/ad.rapidops.com/riya.panchal/Downloads/speedyfood-main/client/src/pages/MyOrders/Components/Order.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport OrderStatus from './OrderStatus';\nimport { useLocation } from \"react-router-dom\";\nimport io from 'socket.io-client';\nimport { SweetOrderStatusUpdated } from '../../../SweetAlert';\nimport api from '../../../utils/api';\nimport Loader from '../../../components/Loader';\nimport { Context } from '../../../utils/context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Order = () => {\n  _s();\n  var _order$items;\n  const {\n    state\n  } = useLocation();\n  const [data = state, {}] = useContext(Context);\n  const [isLoading, setIsLoading] = useState(true);\n  const [order, setOrder] = useState([]);\n  const [activeStep, setActiveStep] = useState(0);\n  const order_status = {\n    \"order_placed\": 0,\n    \"order_confirm\": 1,\n    \"order_prepare\": 2,\n    \"order_out\": 3,\n    \"order_deliverd\": 4\n  };\n  const getSteps = ['Order Placed Succesfully', 'Order Confirm By Speedyfood', 'Preparing Food', 'Your Order Is Out For Delivery', 'Order Deliverd Successfully'];\n  useEffect(() => {\n    const getOrders = async () => {\n      var _data$user;\n      const res = await api.post('/singleorder', {\n        email: (_data$user = data.user) === null || _data$user === void 0 ? void 0 : _data$user.email,\n        id: state === null || state === void 0 ? void 0 : state.id\n      });\n      setIsLoading(false);\n      setOrder(res.data);\n      setActiveStep(order_status[res.data.status]);\n    };\n    getOrders();\n    const socket = io(`http://localhost:5000/`, {\n      withCredentials: true\n    });\n    //  const socket = io(`${process.env.REACT_APP_ENDPOINT}`,{\n    //                 withCredentials: true\n    //             })\n\n    socket.on(\"connect\", () => {\n      socket.emit('join', `order_${state.id}`);\n      socket.on('orderUpdated', data => {\n        setActiveStep(order_status[data.status]);\n        SweetOrderStatusUpdated(getSteps[order_status[data.status]]);\n      });\n    });\n    return () => {\n      socket.off();\n    };\n  }, [activeStep, state === null || state === void 0 ? void 0 : state.id]);\n  if (isLoading) return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 28\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"mt-3 md:mt-10\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"md:mx-36 order grid grid-cols-1 md:gap-12 md:grid-cols-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-center font-bold text-xl text-gray-700 my-4\",\n          children: \"Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), order === null || order === void 0 ? void 0 : (_order$items = order.items) === null || _order$items === void 0 ? void 0 : _order$items.map(item => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center p-2 md:ml-4  border-gray-200 border-b-2 md:py-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"w-24\",\n              src: item.image,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 item-name ml-2 md:ml-4\",\n              children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-sm md:text-lg\",\n                children: item.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 align-middle ml-2 md:ml-0\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-base md:text-lg inline-block\",\n                children: [item.qty, \" Pcs\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-bold text-base md:text-lg\",\n              children: [item.price, \" Rs\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 37\n            }, this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 33\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mx-auto md:col-span-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-center font-bold text-xl text-gray-700 my-4\",\n          children: \"Order Status\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(OrderStatus, {\n          status: activeStep\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n};\n_s(Order, \"aogKHZ10nif2YRvW+/txmEDG014=\", false, function () {\n  return [useLocation];\n});\n_c = Order;\nexport default Order;\nvar _c;\n$RefreshReg$(_c, \"Order\");","map":{"version":3,"names":["React","useContext","useEffect","useState","OrderStatus","useLocation","io","SweetOrderStatusUpdated","api","Loader","Context","Order","state","data","isLoading","setIsLoading","order","setOrder","activeStep","setActiveStep","order_status","getSteps","getOrders","res","post","email","user","id","status","socket","withCredentials","on","emit","off","items","map","item","image","title","qty","price"],"sources":["/home/ad.rapidops.com/riya.panchal/Downloads/speedyfood-main/client/src/pages/MyOrders/Components/Order.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport OrderStatus from './OrderStatus';\nimport { useLocation } from \"react-router-dom\"\nimport io from 'socket.io-client'\nimport {SweetOrderStatusUpdated} from '../../../SweetAlert'\nimport api from '../../../utils/api';\nimport Loader from '../../../components/Loader';\nimport { Context } from '../../../utils/context';\n\nconst Order = () => {\n\n  const { state } = useLocation()\n\n  const [data=state, {}] = useContext(Context)\n\n  const [isLoading, setIsLoading] = useState(true)\n\n  const [order, setOrder] = useState([])\n\n  const [activeStep,setActiveStep] = useState(0);\n\n  const order_status = {\n      \"order_placed\"  : 0,\n      \"order_confirm\" : 1,\n      \"order_prepare\" : 2,\n      \"order_out\"     : 3,\n      \"order_deliverd\": 4\n  }\n\n  const getSteps = \n        [\n            'Order Placed Succesfully',\n            'Order Confirm By Speedyfood', \n            'Preparing Food', \n            'Your Order Is Out For Delivery',\n            'Order Deliverd Successfully'\n        ]\n\n  useEffect(() => {\n\n    const getOrders = async () => {\n            const res = await api.post('/singleorder',{email:data.user?.email,id:state?.id})\n            setIsLoading(false)\n            setOrder(res.data)\n            setActiveStep(order_status[res.data.status])\n    }\n\n    getOrders()\n\n     const socket = io(`http://localhost:5000/`,{\n                    withCredentials: true\n                })\n    //  const socket = io(`${process.env.REACT_APP_ENDPOINT}`,{\n    //                 withCredentials: true\n    //             })\n\n    socket.on(\"connect\",() => {\n      \n        socket.emit('join',`order_${state.id}`)\n\n        socket.on('orderUpdated',(data) => {\n            setActiveStep(order_status[data.status])\n            SweetOrderStatusUpdated(getSteps[order_status[data.status]])\n        })\n\n    })\n\n    return () => {\n      socket.off()\n    }\n},[activeStep,state?.id])\n\n    if(isLoading)   return <Loader />\n\n    return (\n        <section className=\"mt-3 md:mt-10\">\n            <div className=\"md:mx-36 order grid grid-cols-1 md:gap-12 md:grid-cols-2\">\n                <div className=\"\">\n                    <h1 className=\"text-center font-bold text-xl text-gray-700 my-4\">Items</h1>\n                    { \n                        order?.items?.map((item) => {\n                            return (\n                                <div key={item.id} className=\"flex items-center justify-center p-2 md:ml-4  border-gray-200 border-b-2 md:py-4\">\n                                    <img className=\"w-24\" src={item.image} alt=\"\" />\n                                    <div className=\"flex-1 item-name ml-2 md:ml-4\">\n                                        <h1 className=\"text-sm md:text-lg\">{item.title}</h1>\n                                    </div>\n                                    <div className=\"flex-1 align-middle ml-2 md:ml-0\">\n                                        <span className=\"text-base md:text-lg inline-block\">{item.qty} Pcs</span>\n                                    </div>\n                                    <span className=\"font-bold text-base md:text-lg\">{item.price} Rs</span>\n                                </div>\n                            )\n                        }) \n                    }\n                </div>\n                <div className=\"mx-auto md:col-span-1\">\n                    <h1 className=\"text-center font-bold text-xl text-gray-700 my-4\">Order Status</h1>\n                    <OrderStatus status={activeStep} />\n                </div>\n            </div>\n        </section>\n    );\n}\n\nexport default Order"],"mappings":"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"},"metadata":{},"sourceType":"module"}